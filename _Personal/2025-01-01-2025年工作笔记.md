---
layout: post
title:  2025年工作笔记
date:   2025-01-01 09:00:00 +0800
categories: Personal
tag: Personal
last_modified_date: 2025-01-01 09:00:00 +0800
---
## 摘要

+ 2025年工作日志，记录每天的工作内容，便于复盘

<!--more-->

## 01.01 - 01.05

+ 01.01
  + 增加手动操作界面
    + 扩大相机图像尺寸
    + 增加速度控制功能

+ 01.02 
  + 江南现场出差
  + 装板机器人
    + 手工操作界面

+ 01.03
  + 装板机器人
    + 手工操作界面

+ 01.04
  + 休息

+ 01.05
  + 嘉定图书馆学习
    + 图像数据的应用
    + OpenVINO 边线检测模型加载，推理，后处理适配完成
    + 至此，onnxruntime，OpenVINO都熟悉了，还有TensorRT
  + windows下C++项目VSCode编译速度慢的问题

## 01.06 - 01.12

+ 01.06
  + 准备下午的汇报
    + 测试末端运动最大速度
    + 二次举升 由单轴运动改为末端运动
      + 根据点激光数据判断运动的距离
    + 优化调平速度
    + 优化对边速度
    + 优化贴合速度
  + AI部署工程师技术栈
    + onnxruntime
    + openvino
    + tensorrt
  + 解决编译速度慢的问题 ： 解决不了，暂时放弃

+ 01.07
  + 二次举升，末端运动方案不行，原因：Z轴方向运动距离约300mm，运动结束后，前后轴基本到达限位，无法进行后续操作。

+ 01.08
  + 机器人效率测试

+ 01.09
  + 机器人精度测试

+ 01.10
  + 侧板作业测试

## 01.13 - 01.19

+ 01.13
  + 装板机器人 优化建议，硬件，软件。
  + 数据库 [done]
    + 检索索引为板的编号
  + 示教点增加仓编号 [延后]
  + 稀土的项目
    + 作业流程
    + 通信模块
+ NVIDIA jetson
+ 硬件IO

+ 01.14
  + 稀土的项目
    + 作业流程
    + 通信模块
    + 全自动，无人维护
    + 任务状态机划分，画图

+ 01.15
  + 稀土机器人
    + 任务流程设计

+ 01.16
  + 稀土机器人
    + 任务流程设计，确定了各阶段

+ 01.17
  + 请假

## 01.20 - 01.26

+ 01.20
  + 学习Libevent，后续替换TcpCom(tcp通讯)
  + 学习QSerialPort，替换SerialCom(串口通讯)
  + 上板流程优化，目标达到1分钟内

+ 01.21
  + 上板过程效率分析
    + 形成文档，并汇报

+ 01.22
  + 碰钉软件和装板软件统一化。

## 02.03 - 02.09

+ 02.03

+ 02.04

+ 02.05
  + 选择公司
    + 西井科技：AI+新能源无人驾驶牵引车
    + 上海博珖机器人有限公司：机器人＋新能源
    + 库灵科技：AI+表面瑕疵缺陷检测
  + 当前项目
    + 装板机器人验收
    + 碰钉--装板机器人代码优化
  + 工作规划
    + 碰钉，装板项目总结，新简历编写
    + 软考--嵌入式工程师准备

+ 02.06

## 02.10 - 02.16

+ 02.10
  + 测试程序是否可以正常运行
    + 作业环境可正常运行，开发环境需要调整
  + 优化视觉部分，支持CPU，Intel，Nvidia三种架构平台。 -- 视觉应用平台
    + cpu： onnxruntime
    + Intel：OpenVino
    + Nvidia：TensorRT
  + 文档
    + 梳理LNG碰钉--装板机器人项目，输出PPT
  + 装板流程时间分析。
    + 当前耗时，理论上最大时间。

+ 02.11
  + 装板流程效率分析
    + 明天根据日志，重点分析对边过程耗时原因
  + 代码重构
    + task模块依赖com模块的：
      + 获取遥控器指令 [done]
      + 灯光控制 [done]
      + 电推杠控制 [done]
      + 十字激光控制 [done]
      + 获取点激光数据 (串口通信)[done]

+ 02.12
  + 装板流程效率分析
    + 分析对边耗时原因：对边速度调整条件，由或改为与，只有xyz调整量都小于5mm时，才降低移动速度
    + python脚本，筛出定位阶段的日志
  + 代码重构
    + 轮廓激光
    + 完成新版本简历

+ 02.13
  + 测试推理效率：
    + onnxruntime：398ms
    + openvino：226ms
    + tensorrt: 81ms
  + 新增infer目录，主要负责模型部署，适配异构平台
    + onnxruntime封装 [done]
    + tensorrt封装 [doing]

+ 02.14
  + 配置cuda环境
    + cuda 11.8
    + tensorrt 8.6
  + 个人提升
    + 借助面试，整理自己的学习笔记
    + 申克机械面试准备
      + 英语自我介绍
      + 英文测试
      + 技术题
        + OpenCV 了解基础图像处理，不是强项
        + Halcon 商业的工业机器视觉软件
        + 多线程编程 重点复习 [done]
        + 网络编程 重点复习 [done]
        + 数据结构与算法
        + 机器视觉系统
        + Linux环境下的开发与调试
        + ROS简单学习
      + 项目介绍
        + LNG碰钉--装板机器人
        + 机场行李搬运
        + 主控系统
      + HR薪资

## 02.17 - 02.23

+ 02.17
  + 桂干测试，补充说明书。拧螺钉事情
  + 出料机器人
    + 完成任务设计文档 [done]
      + 完成第一层状态转换
      + 取工具--标定 状态删掉
      + 预热--校正 先运动到准备位置，然后通过视觉算法得到预热位置，最后走到预热位置。 预热位置和准备位置不同，预热位置为了避免工具末端传感器被烧，是倾斜的，下挖时工具时垂直向下的。
      + 终止指令执行后，状态跳转为 故障状态。
    + 设计代码验证流程 [undo]
  + 个人提升
    + 准备英文自我介绍
    + tensorrt 模型部署 推理

+ 02.18
  + 出料机器人
    + 任务设计文档
      + 第一层状态转换
      + 第二次根据建议修改
  + 碰钉--装板 
    + 流程
    + 工艺难点
  + 个人提升
    + 英文自我介绍 [defer]
    + tensorrt 模型部署 推理 [done]
    + C++软件工程师
      + 熟悉linux操作系统
      + 熟悉TCP/IP网络编程 [重点复习]
      + 熟悉软件开发常用技术: 队列，锁，多线程，设计模式
      + 精通C/C++ [重点复习]
      + 有一定Qt开发经验 [重点复习]
      + 熟悉面向对象技术
      + 有机器人应用工艺包开发经验者优先

+ 02.19
  + 出料机器人
    + 再梳理一下任务设计文档，看着还是比较乱
  + 碰钉--装板
    + 验证tensorrt封装的类是否可用 [done]
    + 软件发行 [defer]
  + 个人提升
    + 复习一下协作臂主控系统：ethercat， xenomai
    + 实时系统和非实时系统
    + qt框架
    + 算法工程化
    + ROS
    + 珞石 四百多人
      + 北京 一百五十多人
      + 山东  一百五十多人
    + 上海 几个人
      + 软件 1-2人
      + 机械
      + 周四 复试
    + 整体 19
    + 软件部
    + 机械部
    + 电子电气部
    + 没有分组
    + 李经理
  + 复习重点
    + 机械臂主控系统相关知识
      + 
    + OpenCV图像处理

+ 02.20
  + 出料机器人
    + 正常流程设计基本完成
    + 设计故障处理情况与方案
  + 个人提升
    + B/S架构优点：
      + 前后端分离，方便部署和维护，提供远程访问能力，对接第三方平台方便。
    + 手眼标定：
      + Eye-to-Hand
      + Eye-in-Hand
      + 基地坐标系和末端坐标系
      + 相机坐标系和基地坐标系

+ 02.21
  + 出料机器人
    + 调研机器人任务设计故障处理模块
    + 故障处理模块的设计

+ 02.22
  + 搜集关于申克的信息
  + 机器人行业的个人看法
  + 个人的职业规划
    + RTOS
    + ROS2
    + OpenCV
    + PCL
    + 高性能通讯
  + OpenCV准备
    + 遗留物检测算法 [done]
  + PCL
    + 点云数据处理

## 02.24 - 03.02

+ 总体任务
  + 稀土出料任务流程仿真
  + 装扮机器人com模块重构

+ 02.24
  + 稀土出料
    + 配置Qt库 [done]
    + 代码流程设计
      + 前面状态
    + 状态机的设计模式
      + 基于枚举和switch-case结构
      + 状态模式
  + 个人提升
    + C++基础题

+ 02.25
  + 稀土出料
    + 界面基本框架 [done]
    + 任务模块设计：状态模式 [undo]
  + 个人提升
    + 整理遗留物检测算法
    + 复习项目文档
    + 整理英文自我介绍，项目介绍，英文问题
    + 面试流程
      + 姚主管技术面试--> C++测试题 --> 英语测试题 --> 业务部门领导面试 --> HR领导面试

+ 02.26
  + 稀土出料
    + 状态模式 实现失败，放弃了

+ 02.27
  + 稀土出料
    + 沿用碰钉--装板机器人架构，先实现功能
    + 增加出料--倒料计数 [done]
    + 指令集改为下一步 [done]
  + 装板机器人
    + 桂干现场使用测试板多做几遍，熟悉装板流程。

+ 02.28
  + 稀土出料
    + 暂停--继续按钮 [done]
    + 消息提示 [done]
    + 状态流程
      + 区分第一层状态和第二层状态 [done]
      + 增加箭头 [暂时搁置]
  + 装板机器人 
    + 点激光3 数据突然无效导致流程退出
    + 界面增加日志级别控制
  + 个人提升
    + 基本面试，复习珞石二面失败经验
    + 英语自我介绍，个人优缺点，介绍一个项目
    + 岗位相关问题

+ 03.01
  + 学习英语，考虑职业发展

+ 03.02
  + 个人提升
    + 基本面试：工作履历，项目介绍，遇到问题，怎么解决，**参考珞石二面**
    + 英语自我介绍，个人优缺点，介绍一个项目
    + 准备问题，职业发展相关问题。 [参考文章 2025-02-22--申克机械]

## 03.03 - 03.09

+ 03.03
  + 装板机器人现场测试

+ 03.04
  + 装板机器人现场测试

+ 03.05
  + 装板机器人现场测试

+ 03.06
  + 装板机器人现场测试

+ 03.07
  + 请假

## 03.10 - 03.16

+ 03.10
  + 装板机器人
    + 整理上周测试数据，分析精度和效率问题
  + 3号仓装板机器人目标
    + 定位点激光3数据异常问题，记录点激光3的数据变化
    + 上板流程控制在1min30s，自动流程控制在3min30s，整体在5min内
    + 误差达到1mm内，连续装板几块，查看偏差规律。

+ 03.11
  + 现场出差

+ 03.12
  + 现场出差

+ 03.13
  + 现场出差

+ 03.14
  + 现场出差

+ 03.15
  + 复盘，规划下一步
  + 3月22日前把离职时间确定了，尽快离职，回家陪父母

## 03.17 - 03.23

## 03.24 - 03.30

## 03.31 - 04.06

## 04.07 - 04.13

+ 04.07 
  + 休息

+ 04.08
  + 入职上海申克机械有限公司，研发工程师，主要做机器人控制和视觉算法开发

+ 04.09
  + 入职培训

+ 04.10
  + 出差北京

+ 04.11
  + 熟悉现场设备

+ 04.12
  + 熟悉现场产品

+ 04.13
  + 熟悉现场产品

## 04.14 - 04.20

+ 04.14
  + 工控机控制机器人运动

+ 04.15
  + 需求：适应不同车型。选择车型号，移动机器人时使用对应的路径点。
  + 思灵机器人路点集功能试验
    + 作用是什么
      + 约束规则，启用之后不同路点集之间不可直接移动。
    + 怎么使用
      + 为了安全考虑，不满足需求
  + 使用map，键为车型号，值为路径点列表。 
    + 现在python代码加，X-Line平台不熟悉，先不加。
    + python代码完善 [done]
  + 最近点移动 [done]
    + 例如：处于中间点2时，收到去standy指令，
      + 现在是流程是 HOME -> MID1 -> MID2 -> STANDBY。
      + 新流程应该是：
        + 计算出最近点，并移动到该点
        + 从该点继续移动到目标点。

+ 04.16
  + 工作环境 Access 64位引擎安装失败  --  已解决
    + 步骤如下 
      + 以管理员权限安装64位引擎：AccessDatabaseEngine_X64.exe /quiet
      + 打开注册表，找到目录：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\16.0\Common\FilesPaths 。 删除 mos.dll一项。

+ 04.17
  + 一线机械臂Python代码，二线机械臂代码合并 [done]
  + X-Line的数据库学习
    + BitValues
    + Configuration
  + 源代码的学习
    + GUI界面是基于MFC框架实现
    + 使用.sln组织项目，完全依赖于Windows下的Visual Studio
    + MFC学习

+ 04.18
  + 新机械臂路径规划测试。
    + start_program() 函数 调用子程序。此为异步执行
    + call_function() 函数 调用子程序。此为同步执行
    + 在执行子程序时，当前点一定是第一个路点，如果不是，需要手动运动到该第一个路点。
    + 当前进度：
      + 自己实现的路径可通过X-Line调用
      + 支持不同车型：接收车型ID，调用不同车型的路径
        + 全局函数，根据ID生成路点列表 [done]
      + 仿真视频路径实现。
      + 实现路点解析功能
        + 命名规则：home, mid_1_SU7, mid_2_YU7, mid_2_SU7,..., mid_99_SU7(最后一个点为眼盒周围的点)
  + 4月20日启程去合肥江淮，目的是优化3D点云检测算法，增加点云滤波功能。
  + 主要工作步骤
    + 拷贝小米项目带有点云滤波功能的项目文件
    + 使用ExclusivCopy软件备份合肥江淮现场项目文件
      + 打开ExclusivCopy界面，点击Configuration->Load
      + 选择 config.mpd 
      + 点击 Zip! 开始备份
    + 替换项目下的Bin64目录
    + 打开 Height3DParameters/Height3D_SU7.txt 文件。将如下内容拷贝到合肥江淮项目相同文件中：
      + PicTool-TrimPointCloud-Input-distance_threshold=5
      + PicTool-TrimPointCloud-Input-region_threshold=5000
      + PicTool-TrimPointCloud-Input-knn_size=1
    + 至此，完成了合肥江淮点云滤波算法的升级。后续工作是现场测试，验证点云滤波的效果，达到合同上检测精度在正负1mm(客户要求正负0.5mm，能达到最好，达不到也没办法。)
  + 检测轮眉到轮心距离工作
    + 静态车辆检测
      + 调整到 标定模式
      + 选择 标定车高测量系统
      + 选择车型
      + 打开对中
      + 选择车辆静态MFU
    + MFU文件分析

+ 04.19
  + 出差合肥

+ 04.20
  + 准备进厂
  + 检查最新X-Line软件
    + 车高测量流程
      + 选择车型(合肥江淮只有一个车型)
      + 车辆怎么对中？
      + 后轮相机如何控制
      + 车辆静态MFU
  + dflow学习
    + 弄清楚服务器和客户端之间的关系，怎么配置
  + 问题
    + 怎么测试3D点云检测情况？
    + 现场MFU只有 FR 为绿色，其他三个都是红色。
    + 目前备份了现场的软件，替换了Bin64，现场Height3D_X6配置文件的参数增加了3D点云算法的滤波参数。 接下来怎么做

## 04.21 - 04.27

+ 04.21
  + X-Line 车高测量流程
    1. 选择车型
    2. 打开对中，使车位于中间，之后关闭对中
    3. 开灯
    4. 点击 车辆静态MFU
  + 在本地运行X-Line，不选 真实配置，如果选了，会一直进不去
  + find_roi 未激活，增加
    + PicTool-MeasureTire3D-Input-find_roi=1
  + 启动出现 ChangZhou 告警
    + 在start.bat脚本中删除对应语句
  + 轮眉：2D检测算法
    + FR不稳定，这是导致检测不成功的主要问题。
  + 轮芯：3D检测算法
    + 检测精度范围在1.3mm内
  + 合肥江淮最新升级算法版本的软件可以运行，可以检测。目前问题是：轮眉2D检测算法受曝光不稳定影响，导致检测结果有跳变情况。
  + 后续计划
    + 姚大师说，相机为固定曝光值，
    + 可以考虑在启动相机后，等待两秒

+ 04.22
  + 现在的问题是什么？
    + 相机曝光时间不对，导致画面亮度不统一，2D检测效果不好。
  + 现场相机
    + 2541 ：FR
    + 2573 : RL
    + 7298 : FL
    + 7290 : RR
  + 相机相关专业术语
    + **曝光时间(Exposure Time)**，指相机传感器接收光线的时间长度，通常称为 快门速度(Shutter Speed)。单位为秒(s)或分数(例如1/60s)
      + 数值越小（如1/1000s）：传感器感光时间短，进光量少，适合拍摄高速运动物体（减少动态模糊）。
      + 数值越大（如1/30s）：传感器感光时间长，进光量多，适合暗光环境，但可能导致动态模糊
      + **亮度：曝光时间越长，图像越亮；反之则越暗。**
      + 动态模糊：长曝光时间会记录物体运动的轨迹（如车流灯光），短曝光时间会冻结动作。
      + 暗光环境：使用长曝光（如夜景拍摄需1秒以上）。
      + 高速摄影：短曝光（如1/4000s拍摄水滴溅起）。
    + **色彩增益(Color Gain)**, 是指通过调整图像中不同颜色通道（通常是红、绿、蓝三通道，即RGB）的信号强度，改变图像整体色彩平衡的技术参数。其核心目的是增强或减弱特定颜色的亮度表现，从而修正色偏、适应光照条件或实现特定的视觉效果
    + 光圈(Aperture)
      + 作用：控制进光量：光圈值（F值）越小（如F/1.8），进光量越大，图像越亮。
    + 感光度(ISO)
      + 作用：调节传感器对光的敏感度：ISO越高（如ISO 3200），图像越亮，但噪点增多。
      + 调整场景：光线不足且无法延长快门/开大光圈时，适当提高ISO。
      + 注意事项：优先使用低ISO（如ISO 100-800）保证画质，高ISO（>1600）慎用。
  + 小结
    + FL和FR画面亮度突变问题
      + 原因：在Height3D_X6.txt参数配置文件中，配置了全局曝光率后，单独配置了FL和FR的曝光率。可能在内部处理时，全局参数和特定参数来回切换导致的。
    + 解决方法：
      + 由于2D检测算法受光照环境影响较大，所以删除掉全局曝光率配置参数，单独配置所有相机，针对不同位置，调试确定特定的曝光率
    + 效果
      + 黑车，MFU Cm 三次测量，一栏全绿
  + 当前技巧
    + 色彩增益，降低可使黑白对比效果更好，是轮眉反光的白线更稳定
    + 通过调整 Color Gain 和 Exposure Time。 可使MFU检测达到目标。
    + 当前问题：
      + 调整好的参数，检测效果不稳定。当调整好一个参数版本时，多次测量，会有MFU检测不合格。此时需要在对参数进行调节。
      + 调节方法比较熟悉了。

+ 04.23
  + 领导指令
    + 多收集点图片研究，先调到一个还可以的状态，后面再升级
    + 补光灯是不是对深度图有干扰？明天把灯关了，看看轮芯好不好
    + 轮芯是用轮胎部分拟合的
    + 它这个轮胎是不是太平了，最高点不稳定
    + 最新的软件备份有没，记得给吴广一份，他在常州BYD 搞这个
    + 替换这个seq可以使用模拟图片，不能放到现场工控机，只能在自己电脑上
      + D:\CareerData\工作总结\20250423_合肥江淮视觉调试\Cal_MFU_CAR.Seq
    + PicTool-MeasureTire3D-Input-filter_step=1 后左改到1可以
      + 针对RL轮芯检测数据波动大，单独将RL检测的参数改为1.
      + 对象树为 setup.mdb下的Objects表
      + -Height3D-RL-PicTool-MeasureTire3D-Input-filter_step = 1
  + 当前目标
    + 收集现场图片
    + 调到一个还可以的状态
    + 验证补光灯是否对深度图有干扰，关闭灯光，查看轮芯检测效果
    + 针对RL相机增加特定参数 [done]
      + 正确增加参数的格式：`-Height3D-RL-PicTool-MeasureTire3D-Input-filter_step=1`
    + 打开保存图片步骤
      + 打开文件：FP_HEIGHT3D.SEQ
      + 注释掉`(GetObVal("-xlineControl-OperatingMode") `
    + 白车调试
    + 当前情况
      + 黑车与白车调试。有一个参数冲突。
        + 白车成功：PicTool-TrimPointCloud-Input-distance_threshold=4 
        + 黑车成功：PicTool-TrimPointCloud-Input-distance_threshold=6
    + 拷贝数据

+ 04.24
  + 轮眉检测 使用3D方案
  + 兼容黑色车，白色车的检测参数调试
  + 五一，协助吴广，常州BYD调试3D空悬
  + Height3D_X6.txt 参数笔记
    + -Height3D-Flags-TireCenterMeasType=101 ： 轮胎中心测量类型。101，表示使用3D点云测量轮芯坐标。
    + -Height3D-Flags-FenderMeasType=103 ： 轮眉测量类型。103，用于高反光，点云易丢失轮眉的测量，需配合补光灯使用。(2D测量方案)
    + -Height3D-Flags-FenderMeasType=102 ： 轮眉测量类型。(3D测量方案)
  + 查看3D轮眉检测算法的效果
    + 参数：PicTool-TrimPointCloud-Input-distance_threshold=5
    + 黑色车通过 22
    + 白色车通过 white_23_exception
  + Python数据处理脚本，处理MFU检测保存的图像资源

+ 04.25
  + 从合肥回上海

+ 04.26
  + 休息

+ 04.27
  + 5月1日，常州空悬3D算法调试协助
  + 5月9日，Deepseek 会议
  + 合肥江淮的保密协议培训资料
  + 新人培训课程
    + DAP：Durr Assembly Products，汽车总装测试系统
  + 今天填写工时

## 04.28 - 05.04

+ 04.28 
  + 放弃个人博客搭建
  + 差旅报销等明天再弄
  + 主要目标：
    + 周二下班前，整理好第一版deepseek本地部署的笔记

+ 04.29
  + X-Line 图漾相机部分内存泄漏问题查找
  + ollama 大模型部署，本地chatgpt
    + 在hyper-v虚拟机中安装ubuntu系统，在ubuntu虚拟机中安装docker，部署ollama服务
    + ollama拉取deepseek-R1和llama3.2
    + open webui 部署
    + 可通过界面访问ollama，使用部署的模型进行问答，也可以通过界面增加本地知识库
  + 空悬3D算法升级
  + X-Line 产品学习
    + 先从 Cal_MFU_CAR.Seq 文件开始
    + FP_General |> Path;

+ 04.30
  + 出差到常州

+ 05.01
  + 常州BYD使用合肥江淮的程序
  + 合肥江淮软件
    + 登录用户名：CC，密码：CC
  + 流程
    + 安装系统
    + 拷贝工具
    + 安装X-Line软件环境
      + 安装access数据库驱动：AccessDatabaseEngine_X64.exe
      + 安装vs2019环境：vs2019/v142/vc_redist_64.exe
      + 安装vs2022环境：vs2022/v143/vc_redist_64.exe
    + 启动程序
      + 运行Bin64下的 RegisterComponents_x64.exe 程序，注册动态库
      + 运动 start/start.cmd 脚本启动程序
    + 程序闪退
      + 删除项目文件
      + 重新解压文件并注册
      + 再启动项目
    + 调试相机，参考调试文档：Height3D调试说明.pptx
    + 点云不对，样架三坐标不对。
    + 每个样架都有对应的三坐标报告，依据报告中的数据，将四个标定板的ABC点坐标都输入到数据库 nominals.mdb中的Height3DCalibrationBoard
    + 读取数据对应的序列化文件为 FP_Height3D.seq

+ 05.02
  + 样架三坐标输入对了，通过对比，数据加载正确
  + 现在点云不对。
    + 前右和后右，在输入三坐标报告中对应数据之后，B点和C点对调。
    + **右边的，你要注意A点是不变的，但是B点和C点位置相对于左边会被调换**
  + 点云正确，调整相机水平度
    + 前置条件：
      + 保证样架是水平的
      + 样架对中
      + Z值不需要考虑，只需要考虑 RX，RY，RZ
    + 调整流程：
      + 用水平仪，把底座打水平，把柱子打竖直
      + 微调四个相机，保证RX，RY，RZ数据都小于+-0.5，尽量在+-0.3以内，越趋近于0越好
      + 后轴移动过程中，相机水平度
    + 再次确认3D点云中车架坐标系原点
  + 当前进度
    + 1线，2线软件配置完成，外参标定完成，后轴相机水平：1线RR需要调整。
    + 最新软件版本：20250502_164500_1line_Proj.7z
  + deepseek 本地知识库
    + hyper-v ubuntu虚拟机IP地址：172.22.189.194

+ 05.03
  + 一线
    + RR轴水平度矫正 [完成]
    + RR相机Rx调整 [完成]
  + 三线 [完成]
    + 相机序列号配置 
    + 系统环境配置
    + 软件配置
    + 相机外参标定
  + PCL 后轴标定
    + 手动将后轴移动到2500mm处
    + 点击标定
  + 大模型部署
    + vLLM
      + python
      + docker
    + generative models
    + pooling models
      + embedding models
      + reranking models
      + reward models
    + 必须使用GPU
  + 后续工作安排
    + 常州比亚迪暂时结束：三条空悬检测线的软件部署，相机外参标定，相机调试
    + 5月5号，常州理想36JPH 2D检测算法学习，研究测量不准问题。

+ 05.04
  + 休息

## 05.05 - 05.11

+ 05.05
  + 任务：
    1. 电脑安装理想的杀毒软件 [done]
    2. 报备明日带电脑的申请 [done]
  + 软件：
    1. 本地运行常州理想版本的软件
    2. 加载本地图片，尝试在本地进行轮芯检测
    3. 查阅相机参数调试资料，弄明白基本的参数所具备的意义，怎么调试，怎么判断如何调试
    4. 根据保存的图片，自己实现一个轮芯检测算法
    5. 弄明白内参标定与外参标定
    6. 与领导沟通清楚任务需求，测量不准，是哪里不准，当前2D算法具体实现的思路是什么，当前检测流程是什么？有没有相关的调试文档？

+ 05.06
  + 实车测试
    + 采集数据
  + 推论
    + 轮芯检测，从检测画面上看，检测到6个圆，标记最大的圆为绿色，其他为红色，取圆心为轮芯。那么轮芯检测的逻辑是：取检测到的圆中，面积最大的圆的中心吗？
    + 问题：标为绿色的圆来回跳变，原因是有两个圆大小差异不大，识别为轮芯的圆会在这两个差异不大的圆来回跳动
  + 测试
    + 旧参数
      + 曝光时间 20000
      + 增益 10
    + 新参数
      + 曝光时间 38000
      + 增益 28
  + 笔记
    + 重投影误差
      + 重投影是在实时渲染中，将历史帧的渲染结果应用到当前帧的渲染中，解决前后帧对应的问题。在激光雷达和相机的标定中，重投影误差用于衡量投影点与真实点的像素差。
      + 在计算机视觉中，重投影误差被用来优化单应矩阵或投影矩阵，考虑了计算误差和图像点测量误差，精度较高。
  + 现状
    1. 本地笔记本电脑可运行理想空悬软件，但加载图片，无响应，是否可以加载本地图片进行测试？
    2. 相机位置在检测时怎么控制？
    3. 当前进度：
       1. 轮眉高度检测比较稳定，轮芯检测不稳定。检测画面上看，是检测轮胎中圆形区域，取最大的圆为目标圆，其圆心视为轮芯(个人推测)。
       2. 轮芯检测不稳定的现象是：中间正确圆的大小，与周围个别干扰圆的大小相近，检测结果波动会出现干扰圆大于中间正确圆，导致产生误检情况。
       3. 目前试验方案：针对轮芯检测，通过修改曝光时间和增益(20000, 10 --> 38000, 28)，使图像过曝，圆的轮廓更清晰稳定。
    4. 当前问题：
       1. 固定参数，轮眉检测比较稳定(20000, 10)，轮芯检测会频繁出现误检，现在调试的新参数看起来检测更加稳定(38000, 28)，当前软件是否支持轮眉和轮芯使用不同的参数？
       2. 在进行轮眉检测和轮芯检测时，相机位置(Y,Z)的控制流程是怎样的？是人工配置的吗？(手动调试发现，没办法移动到一个位置，可以同时检测轮芯和轮眉)
  + 小结
    + 过曝图像方法不采用
    + 检测logo圆产生误检的原因是螺帽干扰
    + 检测顺序：rim霍夫圆 -> screw -> logo -> rim? -> 刹车片  -> rim
    + 可以设置单一的测量，当时没有车，想法是用一堆算法去尝试。如果车型固定的话就用一种算法测
    + Parameter-AlgorithmNumber-MeasTypOption
    + measTypOption & 0x10 | measTypOption用某一个bit
  + 任务：
    + 屏蔽螺帽检测，仅检测logo 
    + 本地数据测试问题
  + 总结
    + 一次只问一个问题，弄清楚一个问题就可。
    + 本地数据无法测试，**明天实车测试，手动修改参数 MeasTypOption 观察检测情况**
    + 维护cpp-test，实现并学习霍夫圆检测，目标：检测出logo圆

+ 05.07
  + 原则：
    + 一次只干一件事
  + 第一个目标：
    + 通过修改MeasTypOption的值，试验出来仅检测logo圆的效果(初始值为 20)
  + 试验效果
    + Parameter-AlgorithmNumber-MeasTypOption: 
      + 1 : invalid
      + 2 : invalid
      + 3 : invalid
      + 4 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心
      + 5 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心，同时显示 findCircles exception
      + 6 : 与4检测效果相同
      + 7 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心，同时显示 findCircles exception
      + 8 : invalid
      + 9 : invalid
      + 10 : invalid
      + 11 : invalid
      + 12 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心
      + 13 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心，同时显示 findCircles exception
      + 14 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心
      + 15 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心，同时显示 findCircles exception
      + 16 : 误检 一个巨大的圆
      + 17 : 误检 一个巨大的圆,同时显示 findCircles exception
      + 18 : 误检 一个巨大的圆
      + 19 : 误检 一个巨大的圆,同时显示 findCircles exception
      + 20 : 检测logo圆，并标出圆心，螺帽圆，刹车片
      + 21 : 检测logo圆，并标出圆心，螺帽圆，刹车片,同时显示 findCircles exception
      + 22 : 检测logo圆，并标出圆心，螺帽圆，刹车片
      + 23 : 检测logo圆，并标出圆心，螺帽圆，刹车片,同时显示 findCircles exception
      + 24 : 误检 一个巨大的圆，刹车片
      + 25 : 误检 一个巨大的圆，刹车片,同时显示 findCircles exception
      + 26 : 误检 一个巨大的圆，刹车片
      + 27 : 误检 一个巨大的圆，刹车片,同时显示 findCircles exception
      + 28 : 检测logo圆，并标出圆心，螺帽圆，刹车片
      + 29 : 检测logo圆，并标出圆心，螺帽圆，刹车片,同时显示 findCircles exception
      + 30 : 检测logo圆，并标出圆心，螺帽圆，刹车片
      + 31 : 检测logo圆，并标出圆心，螺帽圆，刹车片,同时显示 findCircles exception
      + 32 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想)
      + 34 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想)
      + 35 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想),同时显示 findCircles exception
      + 36 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色
      + 37 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色,同时显示 findCircles exception
      + 38 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色
      + 39 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色,同时显示 findCircles exception
      + 40 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想)
      + 41 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想),同时显示 findCircles exception
      + 42 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想)
      + 43 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想),同时显示 findCircles exception
      + 44 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色
      + 45 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色,同时显示 findCircles exception
      + 46 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色
      + 47 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色,同时显示 findCircles exception
      + 48 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片
      + 49 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片,同时显示 findCircles exception
      + 50 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片
      + 51 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片,同时显示 findCircles exception
      + 52 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色；检测刹车片
      + 53 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色；检测刹车片,同时显示 findCircles exception
      + 54 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色；检测刹车片
      + 55 : 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色；检测刹车片,同时显示 findCircles exception
      + 56 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片
      + 57 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片,同时显示 findCircles exception
      + 58 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片
      + 59 : 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(目前最理想), 检测刹车片,同时显示 findCircles exception
      + 60 : 检测logo圆，并标出圆心，螺帽圆，标出圆心，刹车片
      + 61 ：检测logo圆，并标出圆心，螺帽圆，标出圆心，刹车片,同时显示 findCircles exception
      + 62 ：检测logo圆，并标出圆心，螺帽圆，标出圆心，刹车片
      + 63 ：检测logo圆，并标出圆心，螺帽圆，标出圆心，刹车片,同时显示 findCircles exception
      + 64 : invalid
      + 65,66,67 : invalid
      + 68 : 检测logo圆，并标出圆心，螺帽圆，未标出圆心
      + 255 : 1111 1111 都置为1，检测效果为：刹车片，螺帽圆心，logo圆并标出圆心
    + 0000 0000 
      + 1 ： 0000 0001
      + 2 :  0000 0010
      + 4 :  0000 0100
      + 8 :  0000 1000
      + 16 : 0001 0000
      + 32 : 0010 0000
    + 20 ： 0001 0100
    + 0011 0010 : 50  | 刹车片检测，螺帽圆心，拟合成一个圆，其圆心与轮芯相近
    + 0011 0000 : 48  | invalid
    + 0010 0100 : 36  | 检测螺帽圆，标出圆心；检测logo圆，标出圆心并设置为绿色
    + 0010 1000 : 40  | 螺帽圆的圆心 拟合成一个圆，其圆心看着与轮芯相近(与32的检测效果没什么区别，证明8的比特位无效)
  + MeasTypOption的值中各个比特位的作用小结
    + 第一个比特位 0000 000* 启用后，检测效果为：单独使用报错；与其他比特位组合使用，一定会显示 findCircles exception。
    + 第二个比特位 0000 00*0 启用后，检测效果为：单独使用报错，与其他比特位组合使用没有变动，所以是**无效的**。
    + **第三个比特位** 0000 0*00 启用后，检测效果为：检测logo圆并标出圆心，检测螺帽圆，绿色圆会在logo圆与螺帽圆来回跳转
    + 第四个比特位 0000 *000 启用后，检测效果为：单独使用报错，与其他比特位组合使用没有变动，所以是**无效的**。
    + **第五个比特位** 000* 0000 启用后，检测效果为：刹车片检测，并有一个点；由全部刹车片的点，拟合成的一个圆，并标出圆心
    + **第六个比特位** 00*0 0000 启用后，检测效果为：标出螺帽圆的圆心；由全部螺帽圆的圆心 拟合成一个圆(绿色)，标出圆心，其圆心看着与轮芯相近
    + 第七个比特位 0*00 0000 启用后，检测效果为：单独使用报错，与其他比特位组合使用没有变动，所以是**无效的**。
    + 第八个比特位 *000 0000 启用后，检测效果为：单独使用报错，与其他比特位组合使用没有变动，所以是**无效的**。
  + MeasTypOption 可取的基础值：
    + 4 ： 检测logo圆并标出圆心，检测螺帽圆，绿色圆会在logo圆与螺帽圆来回跳转
    + 16 ： 刹车片检测，并有一个点；由全部刹车片的点，逆合成的一个圆，并标出圆心
    + 32 ： 标出螺帽圆的圆心；由全部螺帽圆的圆心 拟合成一个圆(绿色)，标出圆心，其圆心看着与轮芯相近
  + MeasTypOption 三个基础值的排列组合：
    + 4 + 16 = 20 ： 未调试之前初始值。刹车片轮廓，刹车片上的点； logo圆，logo圆心； 螺帽圆
    + 4 + 32 = 36 ： logo圆，logo圆心；螺帽圆，螺帽圆心
    + 16 + 32 = 48 ： 刹车片轮廓，刹车片上的点；螺帽圆心；全部螺帽圆心拟合成的圆，拟合成的圆的圆心
  + 总结
    + MeasTypOption 取32，检测数据最稳定
  + 第二个目标：
    + MFU怎么做
  + 解决方法
    + 实车自动模式下调试
  + 轮眉检测，相机位置(Y,Z): (10, 1300)
  + 伦锌检测，相机位置(Y,Z): (9, 5899)
  + 第三个目标：
    + FL轮眉检测波动较大
  + 解决方法
    + 曝光时间，增益由 2000，5 --》 2000，2
  + 第四个目标：
    + 前右 基准位置不对，轮芯检测值为七百多，另外三个为三百多。但高度差正确
  + 明日目标：
    + 参考文档 Height2D空悬设备调试说明.pptx，解决前右相机数据不正确的问题
    + 检测高差与实际测量数据比对

+ 05.08
  + 第一个目标：分析前右相机产生数据不准确问题的原因，找到解决方法
  + 外参是 样架坐标系 --> 相机坐标系 的转换关系
  + 解决方法：
    + 外参标定。 标定架，两个位置，两张图片
  + 第二个目标：
    + 36JPH，前右相机，对中台没有固定标定架的硬件，两条检测线，空悬设备和HUD都是仅前左有，其他都没有固定标定架的硬件
  + 第二个目标搁置
  + 解决方法
    + 外参标定完成
    + 测试标定板通过
  + 第三个目标：准备5月9日上午的AI视觉检测培训
    + 阅读文档
    + 整理自己的项目经历
    + 结合这一个月的工作接触，输出关于AI视觉工具未来的计划

+ 05.09
  + AI视觉培训
  + 做过的深度学习相关的项目：
    + 动态人脸识别
      + RetinaFace -- RetinaNet 检测人脸
      + 提取特征向量
    + 工地检测
    + 智能盒子
      + 基于比特大陆实现 行人，烟火，动作检测，基本基于Yolo模型
    + 视频结构化平台
      + 支持不同硬件平台：NVIDIA，BitMainLand,RockChip，CamBricon(寒武纪)
      + 支持不同模型：YOLOv5，YOLOv8，RetinaFace
      + 支持主流网络视频流：H264，H265，硬件编解码
    + 动态目标抓取
      + 图漾相机 
      + 点云算法 PCL
      + 2D目标检测
      + 3D点云分割
    + 边线检测
      + 白线检测
      + 黑线检测
      + 监督学习：收集现场数据，手动数据标注
  + 下午材料准备
    + 签字
    + 合肥江淮出差补贴申请
    + 常州比亚迪出差补贴申请
      + 吴广，常州比亚迪 理想，客户和电话
    + 北京小米，体检 资料打印 [done]
  + 源代码学习
    + 姚大师演示源代码配置，编译，运行，调试。
  + 后续目标：
    + 弄懂整个项目
      + 根据功能调试，熟悉的功能来学习这个项目，目前检测到的问题：
        + 常州理想项目无法加载本地图片
        + 合肥江淮项目MFU测量存在内存泄露问题
        + 提升检测精度

+ 05.10
  + 暂时放弃个人博客，专注X-Line产品源代码的学习
  + 已解决问题为主线，学习源代码
    + 合肥江淮 内存泄漏
      + Img3D/Height3D/Height3D.cpp : CHeight3D::MeasureOnce() 调用一次，内存增长一次

## 05.12 - 05.18

+ 05.12
  + 第一个目标：找到合肥江淮版本内存泄漏问题
    + Height3D : 1429 运行一次，内存增长一次
    + Img3DCamera.cpp : 860,861 运行一次，内存增长约10MB
      + ImgPercipioCamera.cpp : 2064 运行一次，内存增长约8MB
      + Img3DCamera.cpp : 1010 调用OpenCV的函数，内存增长
      + Img3DCamera.cpp : 1092 调用OpenCV的函数，内存增长
    + 当前问题：
      + 调用cv::Mat 构造函数，内存增长，函数结束，内存未释放
  + 第二个目标：常州理想 加载本地图片失败，无法进行本地数据测试
  + 解决：
    + 本地笔记本电脑没有 华谷动力驱动，无法调用
    + 拷贝 -ImageBmp 到相机的 TXT_DisplayImageProps 下的 External Imagesource(CImageAquisition derived) 中
  + DLL库相关知识：
    + https://learn.microsoft.com/zh-cn/windows/win32/dlls/dynamic-link-libraries
  + 第三个目标：常州理想 轮芯检测，使用halcon的模板匹配方法，学习小米底盘检测 模板匹配方法
    + 使用OpenCV在cpp-test中实现模板匹配 [流程完成]
    + 按照调用的函数怎么查找：
      + 在 Alw_Calib.seq 中 114 行
  + 第四个目标：训练YOLO模型，检测轮胎logo，达到，输入一张图片，检测并画出出logo区域
    + 直接使用 ultralytics，ubuntu成功，但是不太方便。
    + 明天直接下载github，训练

+ 05.13
  + 第一个目标：训练YOLO模型，检测轮芯logo区域
    + 基于合肥江淮的58张图片和YOLOv11n预训练模型，训练出了可以检测黑车和白车的模型。
  + 第二个目标：整理数据集
    + "D:\CareerData\work_note\20250513_internal\Log_Height3D" 获取所有可以检测的彩色图  -- 6315
  + 第三个目标：使用训练好的模型，检测数据集，输出检测成功的和未检测成功的。
    + 检测成功 ： 5938  "D:\test_data\success_data"
    + 未检测成功 ： 377 "D:\test_data\fail_data"
  + 第四个目标：检测轮眉
    + 矩形框标注轮眉顶点区域，训练模型
    + 检测成功 : 391 "D:\test_data\success_data_body"
    + 未检测成功 : 5924 "D:\test_data\fail_data_body"
  + 第五个目标：非矩形，数据标注与模型训练流程
    + 目标检测
    + 语义分割
    + 实例分割
  + 取消第五个目标，明日计划：
    + 验证轮芯检测模型重复性
      + 不同的轮芯logo，查看检测效果
      + 不同角度，不同光照，不同环境下采集的图片，查看检测效果
    + 轮眉检测模型效果
      + 暂时放弃轮眉检测，专攻轮芯logo检测模型。
      + 阶段性成功：轮眉区域全部标注，效果与轮芯一样。

+ 05.14
  + 第一个目标：验证轮芯logo检测的重复性
    + 搜集当前所有数据集
    + 针对失败图片，迭代训练
    + 针对已有的现场数据集，训练出一个基本无漏检的模型： best_logo_2_20250514.pt
    + 找不同logo的数据集
    + 手机拍照公司轮胎
    + HEIC转JPG ：在linux下使用piheix库转换，windows不支持
    + 针对公司收集的logo图片，训练出模型：best_company_logo_20250514.pt (基于 best_logo_2_20250514.pt)
      + 注：68.jpg 209.jpg 特征不明显
    + 检测效果：针对不同的logo，可以识别，但检测的目标框相对于 best_logo_2_20250514.pt 比较大，发散。
    + 收集未做模型训练的logo图片，进行预测
      + 81张图片，1张失败。
  + 第二个目标：轮眉识别策略，识别轮胎并分割 [搁置]
  + 新的第二个目标：轮芯检测模型(best_company_logo_20250514.pt, best_logo_2_20250514.pt)工程化，C++ demo 
    + pt --> onnx
  + X-Line 增加新功能合肥江淮：
    + 支持识别黑车白车，
    + 轮眉，轮胎独立点云滤波参数
    + 轮眉拟合，随机点算法，过滤掉光晕影响。

+ 05.15
  + 第一个目标：轮芯logo检测模型工程化
    + python onnxruntime 部署 [done]
      + 单张推理速度约 50ms 左右
    + python opencv.dnn 部署 [done]
      + 单张推理速度约 100ms 左右
    + YOLOv8 和 YOLOv11
      + 同样样本数据，YOLOv11训练的模型 成功率更高
    + C++ opencv.dnn 部署 [done]
      + 单张图片 640 * 480 耗时 200ms左右
    + C++ onnxruntime 部署 [done]
      + 单张图片 640 * 480 耗时 300ms左右
    + 封装，优化opencv.dnn部署代码，提供友好开发接口
      + cv::dnn::blobFromImage
      + cv::dnn::NMSBoxes
      + cv::dnn::readNetFromONNX
      + C风格
      + C++风格  单线程 [done]
        + 构造函数
        + 析构函数
        + 初始化函数
        + 加载模型文件
          + 从构造函数直接加载模型文件
          + 从初始化函数加载模型文件
      + C++风格 独立运行验证 没问题。 "D:\CareerData\work_note\20250515_internal\cpp-test.7z"
      + 模型文件："D:\CareerData\work_note\20250515_internal\models.7z"
    + C++风格 多线程
      + 四个相机同时运行，查看耗时。
    + 轮眉检测 YOLOv11-seg 实例分割

+ 05.16
  + 第一个目标：工控机环境配置，可以训练模型 [done]
    + anaconda
    + python3.10
    + labelme
    + ultralytics
  + 进程：正在训练 YOLOv11-seg 模型
  + 第二个目标：Python GPU 模型训练
    + cpu 训练没问题
    + gpu 训练出错，多线程问题，参考 conda 中 yolo-gpu 环境下运行结果
    + 暂时放弃 
  + 第三个目标：基于 yolov11n.pt 检测轮芯logo，轮胎 [done]
  + 公司笔记本电脑gpu信息
    + cuda 12.9
  + 第四个目标：继续弄GPU加速。算了，还是先弄出一个模型，检测轮胎和logo的
    + 标签：logo, body, wheel

+ 05.18
  + 第一个目标：多目标检测模型(logo, wheel)
    + 已经实现，在cpp--test中的Detector
  + 第二个目标：输入输出形状参数化
    + 单目标检测，输出形状 [1, 5, 8400]
    + 双目标检测，输出形状 [1, 6, 8400]
    + 目前是基于下标 - 4 获得的位置来区分类别，这样可以兼容多个目标识别的，但是不能兼容多目标和单目标
    + 后续想法：每个模型对应一个配置文件，通过配置文件获取下列信息 [done]
      + 当前模型输入输出形状
      + 模型输出目标类别，阈值

## 05.19 - 05.25

+ 05.19
  + 问题：
    + X-Line 误检，整理误检照片
    + 模型整理
    + 数据整理
  + **第一个目标**：复现 轮胎检测问题
    + 0518 有问题
    + 0516 没问题
  + 小结
    + wheel_0516 训练样本只有江淮的黑车，所以针对黑车的轮胎检测比较准确，针对有车衣的检测框不能准确框住轮胎。
    + wheel_0518 训练样本有不同颜色，不同车衣。所以检测比较准确。
    + logo_wheel_20250518_v2 训练样本有不同颜色，不同车衣，不同logo。检测轮胎也比较准确。
  + 针对不同车的颜色，车衣，识别出不同车型，然后用相应的模型
    + 训练一个模型，检测车的类别 
      + 模型：best_yolov11n_car_type_20250519.onnx
      + output_object: "black","white","black_white", "black_white_red"
  + **第二个目标**：通过检测车类型，将现有所有数据集根据车类型分类。 [done]
  + **第三个目标**：针对当前数据集，分别训练对应的logo和wheel检测模型
    + 模型：best_yolov11n_logo_wheel_20250518_v2.onnx
    + output_object: "logo", "wheel"
    + 检测效果：检测框没有明显偏移的情况
  + **第四个目标**：优化车型检测模型 [done]
    + 车型检测模型效果不理想，有误检情况
    + 重新标注数据，进行模型训练
    + 模型：best_yolov11n_car_type_20250519_v2.onnx
    + output_object: "black","white","black_white", "black_white_red"
  + **第五个目标**：优化Detector [done]
    + 支持车型检测阈值配置
  + **第六个目标**：研究自动生成标注文件 [暂时搁置]
    + 根据已有模型，对未标注图片进行预测，输出标注文件。之后人工修正，在进行模型训练
  + 第七个目标：找出X-Line效果与cpp--test效果不同的原因
    + X-Line  opencv_world481
    + cpp--test  opencv_world4110
    + 方法：cpp--test 使用 opencv 4.8.0 查看测试结果
  + 实例分割效果不理想，暂时搁置。

+ 05.20
  + 第一个目标：找出X-Line效果与cpp--test效果不同的原因
    + X-Line 进行图片检测时，通道顺序不一致，图像进行去畸变处理。
    + 模型的训练样本都是未去畸变的。
    + 不同相机，内参和外参不一致
  + 第二个目标：学习去畸变处理方法，将训练数据集都去畸变，在进行模型训练，最后验证检测效果。
    + 读取相机内参，外参。生成去畸变映射图 [done]
    + 能够将一张原图去畸变 从文件名获取相机位置(FL,FR,RL,RR) [done]
    + 数据集图片 去畸变 [done]
    + 效果不同原因： 检测时图片顺时针旋转90度
  + 第三个目标：优化参数，支持实时配置
    + 目前模型的映射关系
      + best_yolov11n_logo_2_20250514.onnx                 : [ "logo" ]
      + best_yolov11n_wheel_20250518.onnx                  : [ "wheel" ]
      + best_yolov11n_logo_wheel_20250520_rotate.onnx      : [ "logo", "wheel"]
      + best_yolov11n_car_type_20250519.onnx               : [ "black","white","black_white", "black_white_red"]
    + https://github.com/opencv/opencv/issues/10210
      + 输入形状 是需要使用者指定的。
    + 模型名称含有：模型版本，模型输出形状，备注
    + Detector.hpp 根据模型名称获取输出形状，模型名称结构为 版本_batch_cols_rows_brief.onnx
      + yolov11n_1_5_8400_logo_2_20250514.onnx
      + yolov11n_1_5_8400_wheel_20250518.onnx
      + yolov11n_1_6_8400_logo_wheel_20250520_rotate.onnx
      + yolov11n_1_8_8400_car_type_20250519_v2.onnx
    + Detector 定位为检测器，仅实现检测功能。不参与业务逻辑处理
      + Detector 只有输出的ID编号，不需要知道ID对应的是哪一类。
    + 增加业务层，进行语义转换。将ID与业务层相连接。

+ 05.21
  + 第一个目标：增加业务层，将检测器输出的数据处理为带业务数据
  + 根据需求，修改Detector完毕

+ 05.22
  + 第一个目标：合肥江淮最新测试图片，检测的框，算出中心点，计算标准差。 [done]
  + 第二个目标：同步源代码，用合肥江淮数据集试验检测效果
  + X-Line编译小结
    + 只能在 release 64位 下编译
    + build 一次后，报错，不要rebuild，继续build一次。
    + 头文件包含问题，手动根据本地环境更改
  + 待解决问题：
    + yolov11n-seg.onnx 待试验
    + vs2022 中文乱码
    + 自动标注

+ 05.23
  + 第一个目标：解决江淮轮芯检测不准确问题
  + YOLO 实例分割
    + 语义分割
    + 实例分割
    + yolov11n-seg
    + 模型训练成功，后续进行模型部署

+ 05.24
  + 第一个目标：yolov11n-seg 模型后处理

## 05.26 - 06.01

+ 05.26
  + 第一个目标：学习yolo-seg论文，弄懂后处理逻辑
    + 论文没什么用
  + 根据yolo官方仓库的示例学习实例分割后处理方法
    + py--test/yolo-seg/deploy_with_onnxruntime.py 实现了后处理
    + 后续梳理思路，移植到C++代码中
      + C++代码复现过程中，分割掩码处理不正确，待解决

+ 05.27
  + 第一个目标：C++ OnnxRuntime yolov11n-seg模型工程化
    + 完成DNN和ONNXRuntime的工程化
  + 第二个目标：封装成类，便于使用
    + 完成封装： Sementation.hpp
    + 单次推理耗时约 140ms
  + 第三个目标：整理源文件，测试文件，模型文件
  + 第四个目标：配置GPU环境,GPU训练模型
    + 参考：
      + 配置cuda环境: https://blog.csdn.net/m0_75067840/article/details/139861757
      + 配置torch-gpu环境: https://blog.csdn.net/qq_46126258/article/details/112708781
        + 离线torch torchvision whl文件下载：https://download.pytorch.org/whl/torch
        + 离线torchaudio whl文件下载：https://download.pytorch.org/whl/torchaudio/
      + 修复多线程错误: https://blog.csdn.net/Owen_goodman/article/details/115521388
    + 待整理一份文档
  + 第五个目标：模型GPU部署
    + 两个环境： OpenCV GPU版本， TensorRT。
    + 优先 OpenCV GPU版本
    + opencv 编译
      + 网络路径改为本地路径： file:///C:/Users/CNSHADZJY/Documents/opencv-4.8.1/.cache/ade/

+ 05.28
  + 第一个目标：集成detector和segmentation
    + 整理所有模型 D:/models
    + 设计接口类
    + 配合yml中model_type，封装类
    + 完成第一版，发送给大师
  + 暂时放弃OpenCV CUDA版本编译，太多坑，而且临时也无法加入X-Line
  + 第二个目标：继续弄 OpenCV CUDA版本编译
    + cmake 修改：
      + ippicv: 3rdparty/ippicv/ippicv.cmake: 26
        + file:///D:/CareerData/work_note/20250528_internal/opencv-4.11-package/
      + ade: modules/gapi/cmake/DownloadADE.cmake:5
        + file:///D:/CareerData/work_note/20250528_internal/opencv-4.11-package/
    + 修改cmake参数
      + OPENCV_EXTRA_MODULES_PATH : opencv_contrib-4.x/modules
      + BUILD_CUDA_STUBS
      + OPENCV_DNN_CUDA
      + WITH_CUDA
      + BUILD_opencv_world

+ 05.29
  + 第一个目标：解决X-Line适配检测器问题
  + 第二个目标：训练模型，兼容黑车和白车
  + 第三个目标：解决实例分割模型GPU无法加速训练问题
    + 模型名称由 yolo11n-seg.pt 改为 yolo11n.pt
      + yolo11n-seg.pt : 从github下载yolo11n.pt 会因为下载失败而结束
      + yolo11n.pt : 不会下载yolo11n.pt 
  + 第四个目标：tensorrt 模型推理加速，opencv gpu版本暂时放弃
    + 理由： tensorrt 对于X-Line平台，只需增加库，不需要重新编译opencv
    + GPU加速相关
      + CUDA
      + cudnn
      + tensorrt
    + 当前环境各组件版本
      + cuda 12.9
      + cudnn 8.9.7.29_cuda12
      + tensorrt 10.10.0.31
    + 流程
      + 参考 tensorrt/samples/sampleOnnxMNIST
        + onnx model to tensorrt network
        + builds an engine
        + runs inference using the generated tensorrt engine
      + 创建 builder 失败，返回nullptr，tensorrt示例可以。
      + 第二天重启电脑，在运行就好了。。。

+ 05.30
  + 第一个目标：tensorrt 模型转换，推理加速
    + 目标检测
    + 实例分割
  + 第二个目标：已完成的单元测试，封装成类
    + onnx 转 engine
    + 加载 engine
    + 前处理
    + 推理
    + 后处理
    + 结果
      + 目标检测 GPU 加速：10 ms/次
      + 实例分割 GPU 加速：13 ms/次
    + 模型训练：86张图片 yolo11n-seg.pt
      + cpu: 1.338 h
      + gpu: 0.139 h
      + 缩短了 1.199 h 效率提升约 1.199 / 1.338 = 0.895
  + 第三个目标：
    + 目前是推理一次，即申请一次GPU内存，且相关资源释放问题未处理。计划优化申请GPU内存策略，资源申请和释放策略。
    + 兼容CPU版本，加到X-Line。

+ 05.31
  + 休息

+ 06.01
  + 待解决问题：
    + xiaomi5003 logo检测失败
    + 自动标注

## 06.02 - 06.08

+ 06.02
  + 第一个目标：试验关键点检测模型 yolo-pose
    + 70% 训练，20% 验证， 10% 测试
    + python 模型训练成功，但是效果不好，没有明显的特征点
  + 第二个目标：python脚本，给一个目录，将目录中所有png，jpg图片拷贝到指定目录
    + py--test/tools/pic_move.py
  + 第三个目标：小米logo识别失败
    + logo最大分数为 0.04

+ 06.03
  + 第一个目标：小米logo识别失败 [done]
    + 基于已有模型，将能够识别的轮胎检测框数据生成labelme对应的json文件，通过labelme打开可直接显示轮胎标注框
    + 目的：省去重复标注可以检测的目标，只需要标注检测失败的目标即可。
  + 第二个目标：基于 yolov11n_1_6_8400_logo_wheel_20250520_rotate.pt 模型，加上xiaomi的logo数据集 [done]
    + 输出模型：yolov11n_1_6_8400_logo_wheel_20250520_rotate_plus_logo_xiaomi_20250603.onnx
    + 存在问题：
      + 检测小米logo分数在0.9以上，但是江淮logo就由0.9降到了0.7左右，并且不稳定
    + 可能原因：
      + logo为一个标签，小米的logo和江淮的logo的特征并不相同，差异比较大。
    + 解决方法：
      + 不同logo，使用不同标签，在输出端通过业务逻辑处理(合并不同logo为一个logo类别)
    + 最新模型
      + yolov11n_1_7_8400_logo_wheel_logo_xiaomi_20250603_rotate.onnx
      + 输出三个标签 logo, wheel, logo_xiaomi
    + 优化最新模型，输出标签为 wheel, logo_jac, logo_xiaomi,
    + 全部数据，logo， wheel，重新训练一边，验证多类型logo是否会导致logo检测分数降低
  + 小结
    + 基于last.pt增加小米数据集，继续训练得到的模型为：yolov11n_1_6_8400_logo_wheel_20250520_rotate_plus_logo_xiaomi_20250603.onnx
    + 江淮数据集＋小米数据集，完全从新训练得到的模型为：yolo11n_1_6_8400_logo_wheel_20250603_rotate.onnx
    + 江淮数据集＋小米数据集，新标签 wheel, logo_jac, logo_xiaomi: yolo11_1_7_8400_wheel_logo_jac_logo_xiaomi_20250603_rotate.onnx
  + 第三个目标：实现自动生成训练数据集脚本 [done]
    + yolo/generate_dataset.py
  + 第四个目标：
    + 这个轮辋也很清晰，你可以测试一下识别轮辋拟合轮心的精度。
      + 嗯嗯，好的好的。我试一下识别轮辋，用精度高一点的模型多试试，看看精度如何，
    + 我们如果能弄一个模型，把轮胎轮眉所有特征都识别出来也可以，说不准什么时候有用。
      + 好的好的，我后面试一试，看看能不能弄出来
    + 这个车的制动盘很清晰，用来识别轮心应该可以。难点就是如何把它分离出来
  + 完成目标检测多标签兼容
  + 弄清楚实例分割后处理逻辑

+ 06.04
  + 自我提升：
    + CS231n 课程
  + 第一个目标：小米汽车，只检测轮胎和logo，查看效果 [done]
    + yolov11n.pt 训练之后只能检测到轮胎
    + yolov11s.pt 训练之后检测到轮胎，logo，分数在0.6左右
    + yolov11m.pt 训练之后检测到轮胎，logo，轮毂，但极不稳定
  + 第二个目标：配置工作站GPU模型训练环境 [done]